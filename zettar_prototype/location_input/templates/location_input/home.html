{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Zetar</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDxQ51BfivW16FpJSX99-TFVlM5lsuK8N0&callback=initMap" async defer></script>
    <script src="{% static 'location_input/js/map_script.js' %}"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/alpinejs" defer></script>
    <style>[x-cloak] { display: none !important; }</style>
</head>
<body class="font-[Inter] bg-gray-50 min-h-screen">


    {% include 'partials/header.html' %}

    <main x-data="{ showEstimate: false }" class="flex flex-col h-[calc(100vh-80px)] max-w-7xl mx-auto p-4 space-y-6">

        <div class="flex flex-1 gap-6">

            <div class="w-2/3 h-full">
                <div class="bg-white rounded-2xl shadow h-full">
                    <div id="map" class="w-full h-full rounded-2xl"></div>
                </div>
            </div>

  
            <div class="w-1/3 h-full flex flex-col gap-6">
                <div class="bg-white rounded-2xl shadow p-4">
                    <h2 class="text-xl font-semibold mb-2">Quickly Estimate Your PoC Connection Costs</h2>
                    <p class="text-gray-700">With Zettar, there's no need to wait for a formal grid offer to understand your connection costs. Just choose your site location, select your energy supply type, and submit—Zettar handles the rest, providing fast, accurate estimates in seconds.</p>
                </div>

                <div class="bg-white rounded-2xl shadow p-4 flex items-center justify-start">
                    <h2 class="text-xl font-semibold">1. Select a Location</h2>
                </div>

                <!-- Which type of connection do you need? -->
                <div class="bg-white rounded-2xl shadow p-4">
                    <h2 class="text-xl font-semibold mb-2">2. Select which type of connection do you need?</h2>
                    <fieldset class="space-y-3">
                        <legend class="sr-only">Connection Type</legend>

                        <label class="flex items-center gap-3 p-3 border rounded-lg cursor-pointer hover:bg-gray-50">
                        <input type="radio" name="connection_type" value="primary" class="accent-blue-600">
                        <span class="text-gray-800 font-medium">Primary</span>
                        </label>

                        <label class="flex items-center gap-3 p-3 border rounded-lg cursor-pointer hover:bg-gray-50">
                        <input type="radio" name="connection_type" value="secondary" class="accent-blue-600">
                        <span class="text-gray-800 font-medium">Secondary</span>
                        </label>

                        <label class="flex items-center gap-3 p-3 border rounded-lg cursor-pointer hover:bg-gray-50">
                        <input type="radio" name="connection_type" value="bsp" class="accent-blue-600">
                        <span class="text-gray-800 font-medium">Bulk Supply Point (BSP)</span>
                        </label>
                    </fieldset>
                </div>



                <!--  -->


                <div class="bg-white rounded-2xl shadow p-4 flex-1 overflow-auto">
                    <h2 class="text-xl font-semibold mb-2">3. Generate Estimate</h2>
                    <button 
                        type="button" 
                        class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 mx-auto block"
                        @click="showEstimate = true; $nextTick(() => window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' }))"
                    >
                        Calculate Estimate
                    </button>
                </div>

                


            </div>

            


        </div>

        <!-- ✅ This goes directly under the two-column layout -->
            <div 
                x-show="showEstimate" 
                x-transition
                x-cloak  
                class="bg-white rounded-2xl shadow p-6 mt-6 max-w-7xl mx-auto w-full"
            >
                <h2 class="text-xl font-semibold mb-4">Connection Cost Estimate</h2>

                    <p class="text-gray-700 mb-4">
                    This is where you'd use HTMX!!
                    </p>

                    <p class="text-gray-700 mb-4">
                    Based on the selected location and connection type, Zettar has generated an initial indicative cost range for your point of connection (PoC). This estimate includes assumptions for standard distribution network configurations and average reinforcement charges across UK DNOs.
                    </p>

                    <p class="text-gray-700 mb-4">
                    Please note: the cost presented here does not constitute a formal quotation. Actual grid connection costs may vary depending on site-specific constraints, capacity headroom at the nearest substation, and engineering requirements such as switchgear, trenching, or protection upgrades. You may also incur additional charges for land rights, legal consents, and surveys.
                    </p>

                    <p class="text-gray-700 mb-4">
                    For Primary and Secondary connections, typical costs range between £50k and £250k. Bulk Supply Point (BSP) connections tend to exceed £500k due to the voltage level and bespoke infrastructure required. Costs also scale with distance to the nearest connection point and available capacity margins in your area.
                    </p>

                    <p class="text-gray-700 mb-4">
                    This tool assumes a demand profile equivalent to a 1–5 MVA industrial or data services load. If you require export capability (e.g., solar or battery), reinforcement thresholds may apply under G99, and you should consult the DNO directly for Statement of Works or specific constraints.
                    </p>

                    <p class="text-gray-700 mb-4">
                    Next steps: You may download this estimate or begin a formal connection request through your DNO’s online application portal. We recommend discussing your project with a grid consultant to align technical requirements, land rights, and timescales with your development program.
                    </p>

                    <p class="text-gray-700 mb-4">
                    ⚠️ This is a non-binding estimate. Zettar makes no guarantees as to network availability or cost caps. For formal quotation and terms, refer to your DNO’s terms under the Electricity (Connections) Regulations 2017.
                    </p>

            </div>

    </main>

</body>
</html>
